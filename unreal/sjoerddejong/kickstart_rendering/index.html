<!doctype html><html lang=en dir=auto>
<head><meta charset=utf-8>
<meta http-equiv=x-ua-compatible content="IE=edge">
<meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no">
<meta name=robots content="index, follow">
<title>Unreal Kickstart - Rendering | Niiok's Blog</title>
<meta name=keywords content>
<meta name=description content="Intro and Philosophy History  rendering has always been focus point best visual at the best performance all-compatible set of tools for any renderer or platform  UE1 (1997)  blended colored light dynamic, static light volumetric light, lensflare, perfect mirrors, procedural texture effects 1k, 2k supported, detailed texture in 256mb memory  UE2 (2002)  DirectX 7 support mesh, terrains, larger outdoor environments, vehicles foliage and particle basic material vertex lighting  UE3 (2006)  DirectX 9 support forward rendering even larger outdoor environments full lightmapping, dynamic shadows  UE4 (2014)  handle any style (not only high realism) scalabiliy, from indipendable to AAA over game egine  better fidelity, architecture, pipeline, flexibility    UE5 (2022)  Nanite Lumen Niagara  Schematic Schematic  Ahead of Rendering Visibility Features Start of Rendering BasePass  BasePass Material  Geometry Precomputed Lighting     GBuffer Dynamic Light & Shadow Reflections Additional  Translucency Atmospherics Etc   Post Processing Final Frame  Scalability and Performance    Schematic Overview Full size (4MB)">
<meta name=author content="Sjoerd De Jong, Mario Palmero">
<link rel=canonical href=https://niiok.github.io/unreal/sjoerddejong/kickstart_rendering/>
<meta name=google-site-verification content="DdPXi9zFzhddjnm20EWbhWv7tBvTySWZYj82E4eWwVA">
<link crossorigin=anonymous href=/assets/css/stylesheet.min.c88963fe2d79462000fd0fb1b3737783c32855d340583e4523343f8735c787f0.css integrity="sha256-yIlj/i15RiAA/Q+xs3N3g8MoVdNAWD5FIzQ/hzXHh/A=" rel="preload stylesheet" as=style>
<script defer crossorigin=anonymous src=/assets/js/highlight.min.7680afc38aa6b15ddf158a4f3780b7b1f7dde7e91d26f073e6229bb7a0793c92.js integrity="sha256-doCvw4qmsV3fFYpPN4C3sffd5+kdJvBz5iKbt6B5PJI=" onload=hljs.initHighlightingOnLoad()></script>
<link rel=icon href=https://niiok.github.io/favicon.ico>
<link rel=icon type=image/png sizes=16x16 href=https://niiok.github.io/favicon-16x16.png>
<link rel=icon type=image/png sizes=32x32 href=https://niiok.github.io/favicon-32x32.png>
<link rel=apple-touch-icon href=https://niiok.github.io/apple-touch-icon.png>
<link rel=mask-icon href=https://niiok.github.io/safari-pinned-tab.svg>
<meta name=theme-color content="#2e2e33">
<meta name=msapplication-TileColor content="#2e2e33">
<noscript>
<style>#theme-toggle,.top-link{display:none}</style>
<style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--hljs-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style>
</noscript><meta property="og:title" content="Unreal Kickstart - Rendering">
<meta property="og:description" content="Intro and Philosophy History  rendering has always been focus point best visual at the best performance all-compatible set of tools for any renderer or platform  UE1 (1997)  blended colored light dynamic, static light volumetric light, lensflare, perfect mirrors, procedural texture effects 1k, 2k supported, detailed texture in 256mb memory  UE2 (2002)  DirectX 7 support mesh, terrains, larger outdoor environments, vehicles foliage and particle basic material vertex lighting  UE3 (2006)  DirectX 9 support forward rendering even larger outdoor environments full lightmapping, dynamic shadows  UE4 (2014)  handle any style (not only high realism) scalabiliy, from indipendable to AAA over game egine  better fidelity, architecture, pipeline, flexibility    UE5 (2022)  Nanite Lumen Niagara  Schematic Schematic  Ahead of Rendering Visibility Features Start of Rendering BasePass  BasePass Material  Geometry Precomputed Lighting     GBuffer Dynamic Light & Shadow Reflections Additional  Translucency Atmospherics Etc   Post Processing Final Frame  Scalability and Performance    Schematic Overview Full size (4MB)">
<meta property="og:type" content="article">
<meta property="og:url" content="https://niiok.github.io/unreal/sjoerddejong/kickstart_rendering/"><meta property="article:section" content="unreal">
<meta property="article:published_time" content="2022-04-26T17:40:24+09:00">
<meta property="article:modified_time" content="2022-04-26T17:40:24+09:00">
<meta name=twitter:card content="summary">
<meta name=twitter:title content="Unreal Kickstart - Rendering">
<meta name=twitter:description content="Intro and Philosophy History  rendering has always been focus point best visual at the best performance all-compatible set of tools for any renderer or platform  UE1 (1997)  blended colored light dynamic, static light volumetric light, lensflare, perfect mirrors, procedural texture effects 1k, 2k supported, detailed texture in 256mb memory  UE2 (2002)  DirectX 7 support mesh, terrains, larger outdoor environments, vehicles foliage and particle basic material vertex lighting  UE3 (2006)  DirectX 9 support forward rendering even larger outdoor environments full lightmapping, dynamic shadows  UE4 (2014)  handle any style (not only high realism) scalabiliy, from indipendable to AAA over game egine  better fidelity, architecture, pipeline, flexibility    UE5 (2022)  Nanite Lumen Niagara  Schematic Schematic  Ahead of Rendering Visibility Features Start of Rendering BasePass  BasePass Material  Geometry Precomputed Lighting     GBuffer Dynamic Light & Shadow Reflections Additional  Translucency Atmospherics Etc   Post Processing Final Frame  Scalability and Performance    Schematic Overview Full size (4MB)">
<script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Unreals","item":"https://niiok.github.io/unreal/"},{"@type":"ListItem","position":2,"name":"Unreal Kickstart - Rendering","item":"https://niiok.github.io/unreal/sjoerddejong/kickstart_rendering/"}]}</script>
<script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"Unreal Kickstart - Rendering","name":"Unreal Kickstart - Rendering","description":"Intro and Philosophy History  rendering has always been focus point best visual at the best performance all-compatible set of tools for any renderer or platform  UE1 (1997)  blended colored light dynamic, static light volumetric light, lensflare, perfect mirrors, procedural texture effects 1k, 2k supported, detailed texture in 256mb memory  UE2 (2002)  DirectX 7 support mesh, terrains, larger outdoor environments, vehicles foliage and particle basic material vertex lighting  UE3 (2006)  DirectX 9 support forward rendering even larger outdoor environments full lightmapping, dynamic shadows  UE4 (2014)  handle any style (not only high realism) scalabiliy, from indipendable to AAA over game egine  better fidelity, architecture, pipeline, flexibility    UE5 (2022)  Nanite Lumen Niagara  Schematic Schematic  Ahead of Rendering Visibility Features Start of Rendering BasePass  BasePass Material  Geometry Precomputed Lighting     GBuffer Dynamic Light \u0026amp; Shadow Reflections Additional  Translucency Atmospherics Etc   Post Processing Final Frame  Scalability and Performance    Schematic Overview Full size (4MB)","keywords":[],"articleBody":"Intro and Philosophy History  rendering has always been focus point best visual at the best performance all-compatible set of tools for any renderer or platform  UE1 (1997)  blended colored light dynamic, static light volumetric light, lensflare, perfect mirrors, procedural texture effects 1k, 2k supported, detailed texture in 256mb memory  UE2 (2002)  DirectX 7 support mesh, terrains, larger outdoor environments, vehicles foliage and particle basic material vertex lighting  UE3 (2006)  DirectX 9 support forward rendering even larger outdoor environments full lightmapping, dynamic shadows  UE4 (2014)  handle any style (not only high realism) scalabiliy, from indipendable to AAA over game egine  better fidelity, architecture, pipeline, flexibility    UE5 (2022)  Nanite Lumen Niagara  Schematic Schematic  Ahead of Rendering Visibility Features Start of Rendering BasePass  BasePass Material  Geometry Precomputed Lighting     GBuffer Dynamic Light \u0026 Shadow Reflections Additional  Translucency Atmospherics Etc   Post Processing Final Frame  Scalability and Performance    Schematic Overview Full size (4MB)\nAhead of Rendering (Frame 0, CPU) All Logic  deciding what to render\n  Gameplay Animation Physics etc..  Visibility (Frame 1, CPU)  check what can be seen by camera. process lighter tasks first to reduce calcuration candidates\n  Occlusion/Visibility Processes  Distance Culling (Lightest)  not enabled by default (recommended) by CullDistanceVolume  or you have to set Desired Max Draw Distance for every actors (annoying)     Frustum Culling  standard enabled why you have to disable this?   Precomputed Visibility  not enabled by default (optional) enable with World Setting property Good for space-time tradeoff  use memmory to reduce cpu cost   by PrecomputedVisibilityVolume   Visibility Culling (Heaviest)  standard enabled heavy check with freezerendering Hardware Occlusion  use every mesh as occluder not work in every devices (so engine need Software Occlusion)   Software Occlusion  uses Mesh LODs as occluder        Start of Rendering (Frame 2, GPU) Early Z Pass  Scene Depth used for deferred rendering pipeline  Basepass  Act of rendering all geometries can check with GPU compiler\n  Drawcalls  HLOD Static Meshes Instanced Meshes Skeletal Meshes Landscapes Procedural Meshes Geometry Collection … etc (Geometry, 3D to render)   Dynamic Instancing  automatically batch drawcalls\n  enabled by default same mesh, same material in one drawcall   Basspass Materials  unreal’s deferred rendering do not render every materials at once. first, basic materials are rendered here (without shadow, blending, etc)\n  Lightmaps  need for initial shading Generated by Lightmass      Static Lighting/Shadows  Lightmass  Separeted application run by Swarm agent manage building and baking lights\n  what  Static Light Actors placed in the world Lightmass Importance Volume Global Illumination/Radiosity   how  Volumetric Lightmaps  default setting for current version saves multiple lighting data since lightmap doesn’t provide dynamic lighitng data   Volume Lighting Samples  used for older version less memory, less gpu time, less accuracy saves single color only for dynamic lighting data        GBuffer  Buffer A : World Normals Buffer B : Specular / Roughness / Metalic Buffer C : Base Color / Lighting Buffer D : Additional Buffer E : Additional  Dyanmic Lighting/Shadows Direct-Light  IES Profiles  customize light projection and intensity can be static   Light Functions  Material - Material Domain - Light Function e.g. fire flickering, water caustics, cloud shadow kinda heavy work, so set Fade Distance in proper value    Direct-Shadow  Dynamic Shadows  optionally use Mesh Distance Field cached (performance dip when invalidated) r.Shadow.CacheWholeSceneShadows   Cascaded Shadow Maps  for gradually disappearing shadows low, medium, high quality (3 by default) commonly used in directional light, outdoor environments still heavy, ugly when shadow disappear - Distance Field Shadows   Distance Field Shadow  not enabled by default uses Mesh Distance Field need more memory and imprecise   Raytraced Shadows Per Object Shdows \u0026 Inset Shadows  used for often-seen shadows (like character mesh) can show more precise shadow   Contact Shadows  shadow over close obejcts kind of post processing for tiny detail    Indirect-Light  both are not commonly used for nowdays\n  Light Propagation  older realtime GI outdated; not recommended   Raytraced GI  complication of raytracing feature complex works    Indirect-Shadow  Raycast AO  raycast feature Accurate raytraced Ambient Occlusion (a.k.a. its name)   Capsule Shadow  simplicating skeletal mesh’s shadow commonly used for tiny creatures or swarming characters can be used for vague light art style   DFAO  Distance Field Ambient Occlusion uses Mesh Distance Field used for moveable. stationary Skylight (in detail panel) let actor scale stay close to 1, or Distance Field will look weird    Reflections  Reflection Process  Reflection Captures  Placed in world, statically captures blend cubemap fast, not precise   Planar Reflections  Placed in world, dynamically capture everytime precise, but only for flat surface realtime; not good for performance   Screen Space Reflections  reuse already-rendered result replaces previous reflections if it possible (per-pixel) can tweak with poss-process volume and cvar (e.g. SSR.Quality)   Raytraced Reflections (optional)    Additional  Atmospherics  In Editor,  Exponential Height Fog  Distance Fog   Atmospheric Fog Sky Atmosphere   Volumetric Fog  with Exponential Height Fog reads Volumetric Lightmaps and adjust color on fog renders dynamic light/shadows on top (e.g. god rays, light illumination) can be tied into particle Volumetric Materials Distance Fog   Physically Based Sky Atmosphere  check for World Building chapter Distance Fog     Translucency  Refraction  material detail panel - Refraction Mode  Pixel Normal Offset : for flat surface Index Of Refraction : for complex 3d objects     if you set Shading Mode as unlit, it’s good for performance Lighting Mode  Volumetric NonDirectional  cheapest   Volumetric Directional Translucency Volume Volumetric PerVertex NonDirectional  almost cheapest   Volumetric PerVertex Directional Surface ForwardShading  heaviest, nice looking   Raytraced      Post Processing  Unrea;’s almost postprocessings are enabled by default Highlight with Volume, Camera, Component, Project Setting turning checkbox off doesn’t mean feature is off set Cvar into 0 or modify project setting to turn feature off\n  Tonemapper  r.Tonemapper.Sharpen   Bloom  multi-stage; layered resulting supports reflection, 6 of size scale and tint\n  Standard Convolution  high quality, expensive, not for realtime rendering     SSAO (Screen Space Ambient Occlusion) SSSSS (Screen Space SubSurface Scattering)  for skin, wax on candle. leaves\n  Burley SSSSS   SSGI (Screen Space Global Illuminaion)  disabled by default approximate GI in screen space (like photoshop)   Depth Of Field  Gaussian  low quality, cheapest   Bokeh  expensive, high quality but Circle/Cinematic is better in performance deprecated; will be removed   Circle/Cinematic  high quality, acceptable performance     Exposure  uses setting in game setting   Blendables  allows PP Material to modify how screen looks like e.g. underwater   Camera Effects  Grain Vignette Chromatic Abberation Lensflares Dirt Mask    Final Frame (Frame N, done) Performance  check for world building chepter since it’s closely related\n  GPU Profiler Stats View Modes Scalability  CVars  CVars are not saved; reset when you turn editor o r.* : rendering, performance critial help : generate HTML page that lists command and description   Scalability Example  Device Profile  CVars are automatically called in distinct device\n  can type in text inside DefaultDeviceProfile.ini can set layer by power to make engine estimate device power and adjust them        Advice  Managing tris and draw calls  do not forget using statistic panel Merge Actors  grouping by materials into single mesh into an actor with multiple instanced static mesh components   Hitting the right balance (check rendering course) LOD  Forced LOD Model LOD Reduction Detail Mode     Shadow rendering  Balance Cascaded Shadow Map / Distant Field Far Shadows  set number of cascade cases and distance in directional light set whether makes far shadow or not in model kinda outdated by distance field   Toggling/Light Range  Max draw distnace in Light detail panel   Polycount/LODs Large Meshes/Foliage Shadows Toggling Shadows on detail meshes (DF+Regular)  Distance Field Shadow is useless for small meshes     Material cost  Noise is expensive Instruction counts / Shader complexity Balance between permutations/Instruction and Materials/Instances Quality Switch   Translucency  use Unlit if you can Instruction counts important if lit - use the volume mode + CVars  e.g. r.TranslucencyLightingVolumeDim   Forward + Reflection is very expensive Dithered translucency   Baking lighting  baking light needs all levels loaded Lightmass Importance Volume Volumetric Lightmaps tips  cell size in world property Volumetric Lightmap Density Volume   override Lightmap size can mass manipulate LM + Statics Build time = LM Res + # lighta + # Meshes + Source Radius + Radius   Reflections  Base layer with Sphere Reflection Captures Placement, tactic, cost and limits Screen Space Reflection settings Planar is rare, careful with real time   Forward/Mobile  Other renderers and where to find them Previewing Material settngs   Scalability Cvars/Shows  CVar tweaking and experimentation workflow Help HTML Export Setting defaults Performance assessments with CVar toggling and Show/Hide commands   use Light Fallout Exponent for sizing light with less cost try to use RenderDoc  ","wordCount":"1346","inLanguage":"en","datePublished":"2022-04-26T17:40:24+09:00","dateModified":"2022-04-26T17:40:24+09:00","author":[{"@type":"Person","name":"Sjoerd De Jong"},{"@type":"Person","name":"Mario Palmero"}],"mainEntityOfPage":{"@type":"WebPage","@id":"https://niiok.github.io/unreal/sjoerddejong/kickstart_rendering/"},"publisher":{"@type":"Organization","name":"Niiok's Blog","logo":{"@type":"ImageObject","url":"https://niiok.github.io/favicon.ico"}}}</script>
</head>
<body id=top>
<script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add('dark'):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove('dark'):window.matchMedia('(prefers-color-scheme: dark)').matches&&document.body.classList.add('dark')</script>
<header class=header>
<nav class=nav>
<div class=logo>
<a href=https://niiok.github.io/ accesskey=h title="Niiok's Blog (Alt + H)">Niiok's Blog</a>
<span class=logo-switches>
<button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg>
</button>
</span>
</div>
<ul id=menu>
<li>
<a href=https://niiok.github.io/categories/ title=Categories>
<span>Categories</span>
</a>
</li>
<li>
<a href=https://niiok.github.io/search/ title="Search (Alt + /)" accesskey=/>
<span>Search</span>
</a>
</li>
</ul>
</nav>
</header>
<main class=main>
<article class=post-single>
<header class=post-header>
<div class=breadcrumbs><a href=https://niiok.github.io/>Home</a>&nbsp;»&nbsp;<a href=https://niiok.github.io/unreal/>Unreals</a></div>
<h1 class=post-title>
Unreal Kickstart - Rendering
</h1>
<div class=post-meta><span title="2022-04-26 17:40:24 +0900 +0900">April 26, 2022</span>&nbsp;·&nbsp;7 min&nbsp;·&nbsp;Sjoerd De Jong, Mario Palmero&nbsp;|&nbsp;<a href=https://github.com/Niiok/niiok.github.io/tree/master/content/unreal/sjoerddejong/kickstart_rendering.md rel="noopener noreferrer" target=_blank>Suggest Changes</a>
</div>
</header> <div class=toc>
<details open>
<summary accesskey=c title="(Alt + C)">
<span class=details>Table of Contents</span>
</summary>
<div class=inner><ul>
<li>
<a href=#intro-and-philosophy aria-label="Intro and Philosophy">Intro and Philosophy</a><ul>
<li>
<a href=#history aria-label=History>History</a><ul>
<li>
<a href=#ue1-1997 aria-label="UE1 (1997)">UE1 (1997)</a></li>
<li>
<a href=#ue2-2002 aria-label="UE2 (2002)">UE2 (2002)</a></li>
<li>
<a href=#ue3-2006 aria-label="UE3 (2006)">UE3 (2006)</a></li>
<li>
<a href=#ue4-2014 aria-label="UE4 (2014)">UE4 (2014)</a></li>
<li>
<a href=#ue5-2022 aria-label="UE5 (2022)">UE5 (2022)</a></li></ul>
</li>
<li>
<a href=#schematic-schematic aria-label="Schematic Schematic">Schematic Schematic</a></li></ul>
</li>
<li>
<a href=#schematic-overview aria-label="Schematic Overview">Schematic Overview</a><ul>
<li>
<a href=#ahead-of-rendering-frame-0-cpu aria-label="Ahead of Rendering (Frame 0, CPU)">Ahead of Rendering (Frame 0, CPU)</a><ul>
<li>
<a href=#all-logic aria-label="All Logic">All Logic</a></li>
<li>
<a href=#visibility-frame-1-cpu aria-label="Visibility (Frame 1, CPU)">Visibility (Frame 1, CPU)</a></li></ul>
</li>
<li>
<a href=#start-of-rendering-frame-2-gpu aria-label="Start of Rendering (Frame 2, GPU)">Start of Rendering (Frame 2, GPU)</a><ul>
<li>
<a href=#early-z-pass aria-label="Early Z Pass">Early Z Pass</a></li>
<li>
<a href=#basepass aria-label=Basepass>Basepass</a></li>
<li>
<a href=#static-lightingshadows aria-label="Static Lighting/Shadows">Static Lighting/Shadows</a></li>
<li>
<a href=#gbuffer aria-label=GBuffer>GBuffer</a></li>
<li>
<a href=#dyanmic-lightingshadows aria-label="Dyanmic Lighting/Shadows">Dyanmic Lighting/Shadows</a><ul>
<li>
<a href=#direct-light aria-label=Direct-Light>Direct-Light</a></li>
<li>
<a href=#direct-shadow aria-label=Direct-Shadow>Direct-Shadow</a></li>
<li>
<a href=#indirect-light aria-label=Indirect-Light>Indirect-Light</a></li>
<li>
<a href=#indirect-shadow aria-label=Indirect-Shadow>Indirect-Shadow</a></li></ul>
</li>
<li>
<a href=#reflections aria-label=Reflections>Reflections</a></li>
<li>
<a href=#additional aria-label=Additional>Additional</a></li>
<li>
<a href=#post-processing aria-label="Post Processing">Post Processing</a></li></ul>
</li>
<li>
<a href=#final-frame-frame-n-done aria-label="Final Frame (Frame N, done)">Final Frame (Frame N, done)</a><ul>
<li>
<a href=#performance aria-label=Performance>Performance</a></li></ul>
</li></ul>
</li>
<li>
<a href=#advice aria-label=Advice>Advice</a>
</li>
</ul>
</div>
</details>
</div>
<div class=post-content><h1 id=intro-and-philosophy>Intro and Philosophy<a hidden class=anchor aria-hidden=true href=#intro-and-philosophy>#</a></h1>
<h2 id=history>History<a hidden class=anchor aria-hidden=true href=#history>#</a></h2>
<ul>
<li>rendering has always been focus point</li>
<li><strong>best visual</strong> at the <strong>best performance</strong></li>
<li><strong>all-compatible set of tools</strong> for any renderer or platform</li>
</ul>
<h3 id=ue1-1997>UE1 (1997)<a hidden class=anchor aria-hidden=true href=#ue1-1997>#</a></h3>
<ul>
<li>blended colored light</li>
<li>dynamic, static light</li>
<li>volumetric light, lensflare, perfect mirrors, procedural texture effects</li>
<li>1k, 2k supported, detailed texture in 256mb memory</li>
</ul>
<h3 id=ue2-2002>UE2 (2002)<a hidden class=anchor aria-hidden=true href=#ue2-2002>#</a></h3>
<ul>
<li>DirectX 7 support</li>
<li>mesh, terrains, larger outdoor environments, vehicles</li>
<li>foliage and particle</li>
<li>basic material</li>
<li>vertex lighting</li>
</ul>
<h3 id=ue3-2006>UE3 (2006)<a hidden class=anchor aria-hidden=true href=#ue3-2006>#</a></h3>
<ul>
<li>DirectX 9 support</li>
<li>forward rendering</li>
<li>even larger outdoor environments</li>
<li>full lightmapping, dynamic shadows</li>
</ul>
<h3 id=ue4-2014>UE4 (2014)<a hidden class=anchor aria-hidden=true href=#ue4-2014>#</a></h3>
<ul>
<li>handle any style (not only high realism)</li>
<li>scalabiliy, from indipendable to AAA</li>
<li>over game egine
<ul>
<li>better fidelity, architecture, pipeline, flexibility</li>
</ul>
</li>
</ul>
<h3 id=ue5-2022>UE5 (2022)<a hidden class=anchor aria-hidden=true href=#ue5-2022>#</a></h3>
<ul>
<li>Nanite</li>
<li>Lumen</li>
<li>Niagara</li>
</ul>
<h2 id=schematic-schematic>Schematic Schematic<a hidden class=anchor aria-hidden=true href=#schematic-schematic>#</a></h2>
<ol>
<li>Ahead of Rendering</li>
<li>Visibility Features</li>
<li>Start of Rendering</li>
<li>BasePass
<ul>
<li>BasePass Material
<ul>
<li>Geometry</li>
<li>Precomputed Lighting</li>
</ul>
</li>
</ul>
</li>
<li>GBuffer</li>
<li>Dynamic Light & Shadow</li>
<li>Reflections</li>
<li>Additional
<ul>
<li>Translucency</li>
<li>Atmospherics</li>
<li>Etc</li>
</ul>
</li>
<li>Post Processing</li>
<li>Final Frame
<ul>
<li>Scalability and Performance</li>
</ul>
</li>
</ol>
<h1 id=schematic-overview>Schematic Overview<a hidden class=anchor aria-hidden=true href=#schematic-overview>#</a></h1>
<p><img loading=lazy src=../rendering_18x24.png alt=image>
<br>
<a href=../rendering_poster.png>Full size (4MB)</a></p>
<h2 id=ahead-of-rendering-frame-0-cpu>Ahead of Rendering (Frame 0, CPU)<a hidden class=anchor aria-hidden=true href=#ahead-of-rendering-frame-0-cpu>#</a></h2>
<h3 id=all-logic>All Logic<a hidden class=anchor aria-hidden=true href=#all-logic>#</a></h3>
<blockquote>
<p>deciding what to render</p>
</blockquote>
<ul>
<li>Gameplay</li>
<li>Animation</li>
<li>Physics</li>
<li>etc..</li>
</ul>
<h3 id=visibility-frame-1-cpu>Visibility (Frame 1, CPU)<a hidden class=anchor aria-hidden=true href=#visibility-frame-1-cpu>#</a></h3>
<blockquote>
<p>check what can be seen by camera. <br>
process lighter tasks first to reduce calcuration candidates</p>
</blockquote>
<ul>
<li>Occlusion/Visibility Processes
<ol>
<li>Distance Culling (Lightest)
<ul>
<li>not enabled by default (recommended)</li>
<li>by <code>CullDistanceVolume</code>
<ul>
<li>or you have to set Desired Max Draw Distance for every actors (annoying)</li>
</ul>
</li>
</ul>
</li>
<li>Frustum Culling
<ul>
<li>standard enabled</li>
<li>why you have to disable this?</li>
</ul>
</li>
<li>Precomputed Visibility
<ul>
<li>not enabled by default (optional)</li>
<li>enable with World Setting property</li>
<li>Good for space-time tradeoff
<ul>
<li>use memmory to reduce cpu cost</li>
</ul>
</li>
<li>by <code>PrecomputedVisibilityVolume</code></li>
</ul>
</li>
<li>Visibility Culling (Heaviest)
<ul>
<li>standard enabled</li>
<li>heavy</li>
<li>check with <code>freezerendering</code></li>
<li>Hardware Occlusion
<ul>
<li>use every mesh as occluder</li>
<li>not work in every devices (so engine need Software Occlusion)</li>
</ul>
</li>
<li>Software Occlusion
<ul>
<li>uses Mesh LODs as occluder</li>
</ul>
</li>
</ul>
</li>
</ol>
</li>
</ul>
<h2 id=start-of-rendering-frame-2-gpu>Start of Rendering (Frame 2, GPU)<a hidden class=anchor aria-hidden=true href=#start-of-rendering-frame-2-gpu>#</a></h2>
<h3 id=early-z-pass>Early Z Pass<a hidden class=anchor aria-hidden=true href=#early-z-pass>#</a></h3>
<ul>
<li>Scene Depth</li>
<li>used for deferred rendering pipeline</li>
</ul>
<h3 id=basepass>Basepass<a hidden class=anchor aria-hidden=true href=#basepass>#</a></h3>
<blockquote>
<p>Act of rendering all geometries <br>
can check with GPU compiler</p>
</blockquote>
<ul>
<li>Drawcalls
<ul>
<li>HLOD</li>
<li>Static Meshes</li>
<li>Instanced Meshes</li>
<li>Skeletal Meshes</li>
<li>Landscapes</li>
<li>Procedural Meshes</li>
<li>Geometry Collection</li>
<li>&mldr; etc (Geometry, 3D to render)</li>
</ul>
</li>
<li>Dynamic Instancing
<blockquote>
<p>automatically batch drawcalls</p>
</blockquote>
<ul>
<li>enabled by default</li>
<li>same mesh, same material in one drawcall</li>
</ul>
</li>
<li>Basspass Materials
<blockquote>
<p>unreal&rsquo;s deferred rendering do not render every materials at once. <br>
first, basic materials are rendered here (without shadow, blending, etc)</p>
</blockquote>
<ul>
<li>Lightmaps
<ul>
<li>need for initial shading</li>
<li>Generated by Lightmass</li>
</ul>
</li>
</ul>
</li>
</ul>
<h3 id=static-lightingshadows>Static Lighting/Shadows<a hidden class=anchor aria-hidden=true href=#static-lightingshadows>#</a></h3>
<ul>
<li>Lightmass
<blockquote>
<p>Separeted application run by Swarm agent <br>
manage building and baking lights</p>
</blockquote>
<ul>
<li>what
<ul>
<li>Static Light Actors placed in the world</li>
<li>Lightmass Importance Volume</li>
<li>Global Illumination/Radiosity</li>
</ul>
</li>
<li>how
<ul>
<li>Volumetric Lightmaps
<ul>
<li>default setting for current version</li>
<li>saves multiple lighting data since lightmap doesn&rsquo;t provide dynamic lighitng data</li>
</ul>
</li>
<li>Volume Lighting Samples
<ul>
<li>used for older version</li>
<li>less memory, less gpu time, less accuracy</li>
<li>saves single color only for dynamic lighting data</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<h3 id=gbuffer>GBuffer<a hidden class=anchor aria-hidden=true href=#gbuffer>#</a></h3>
<ul>
<li>Buffer A : World Normals</li>
<li>Buffer B : Specular / Roughness / Metalic</li>
<li>Buffer C : Base Color / Lighting</li>
<li>Buffer D : Additional</li>
<li>Buffer E : Additional</li>
</ul>
<h3 id=dyanmic-lightingshadows>Dyanmic Lighting/Shadows<a hidden class=anchor aria-hidden=true href=#dyanmic-lightingshadows>#</a></h3>
<h4 id=direct-light>Direct-Light<a hidden class=anchor aria-hidden=true href=#direct-light>#</a></h4>
<ul>
<li>IES Profiles
<ul>
<li>customize light projection and intensity</li>
<li>can be static</li>
</ul>
</li>
<li>Light Functions
<ul>
<li>Material -> Material Domain -> Light Function</li>
<li>e.g. fire flickering, water caustics, cloud shadow</li>
<li>kinda heavy work, so set Fade Distance in proper value</li>
</ul>
</li>
</ul>
<h4 id=direct-shadow>Direct-Shadow<a hidden class=anchor aria-hidden=true href=#direct-shadow>#</a></h4>
<ul>
<li>Dynamic Shadows
<ul>
<li>optionally use <code>Mesh Distance Field</code></li>
<li>cached (performance dip when invalidated)</li>
<li><code>r.Shadow.CacheWholeSceneShadows</code></li>
</ul>
</li>
<li>Cascaded Shadow Maps
<ul>
<li>for gradually disappearing shadows</li>
<li>low, medium, high quality (3 by default)</li>
<li>commonly used in directional light, outdoor environments</li>
<li>still heavy, ugly when shadow disappear -> Distance Field Shadows</li>
</ul>
</li>
<li>Distance Field Shadow
<ul>
<li>not enabled by default</li>
<li>uses <code>Mesh Distance Field</code></li>
<li>need more memory and imprecise</li>
</ul>
</li>
<li>Raytraced Shadows</li>
<li>Per Object Shdows & Inset Shadows
<ul>
<li>used for often-seen shadows (like character mesh)</li>
<li>can show more precise shadow</li>
</ul>
</li>
<li>Contact Shadows
<ul>
<li>shadow over close obejcts</li>
<li>kind of post processing</li>
<li>for tiny detail</li>
</ul>
</li>
</ul>
<h4 id=indirect-light>Indirect-Light<a hidden class=anchor aria-hidden=true href=#indirect-light>#</a></h4>
<blockquote>
<p>both are not commonly used for nowdays</p>
</blockquote>
<ul>
<li>Light Propagation
<ul>
<li>older realtime GI</li>
<li>outdated; not recommended</li>
</ul>
</li>
<li>Raytraced GI
<ul>
<li>complication of raytracing feature</li>
<li>complex works</li>
</ul>
</li>
</ul>
<h4 id=indirect-shadow>Indirect-Shadow<a hidden class=anchor aria-hidden=true href=#indirect-shadow>#</a></h4>
<ul>
<li>Raycast AO
<ul>
<li>raycast feature</li>
<li>Accurate raytraced Ambient Occlusion (a.k.a. its name)</li>
</ul>
</li>
<li>Capsule Shadow
<ul>
<li>simplicating skeletal mesh&rsquo;s shadow</li>
<li>commonly used for tiny creatures or swarming characters</li>
<li>can be used for vague light art style</li>
</ul>
</li>
<li>DFAO
<ul>
<li>Distance Field Ambient Occlusion</li>
<li>uses <code>Mesh Distance Field</code></li>
<li>used for moveable. stationary Skylight (in detail panel)</li>
<li>let actor scale stay close to 1, or Distance Field will look weird</li>
</ul>
</li>
</ul>
<h3 id=reflections>Reflections<a hidden class=anchor aria-hidden=true href=#reflections>#</a></h3>
<ul>
<li>Reflection Process
<ol>
<li>Reflection Captures
<ul>
<li>Placed in world, statically captures blend cubemap</li>
<li>fast, not precise</li>
</ul>
</li>
<li>Planar Reflections
<ul>
<li>Placed in world, dynamically capture everytime</li>
<li>precise, but only for flat surface</li>
<li>realtime; not good for performance</li>
</ul>
</li>
<li>Screen Space Reflections
<ul>
<li>reuse already-rendered result</li>
<li>replaces previous reflections if it possible (per-pixel)</li>
<li>can tweak with poss-process volume and cvar (e.g. <code>SSR.Quality</code>)</li>
</ul>
</li>
<li>Raytraced Reflections (optional)</li>
</ol>
</li>
</ul>
<h3 id=additional>Additional<a hidden class=anchor aria-hidden=true href=#additional>#</a></h3>
<ul>
<li>Atmospherics
<ul>
<li>In Editor,
<ul>
<li>Exponential Height Fog
<ul>
<li>Distance Fog</li>
</ul>
</li>
<li>Atmospheric Fog</li>
<li>Sky Atmosphere</li>
</ul>
</li>
<li>Volumetric Fog
<ul>
<li>with Exponential Height Fog</li>
<li>reads <a href=#static-lightingshadows>Volumetric Lightmaps</a> and adjust color on fog</li>
<li>renders dynamic light/shadows on top (e.g. god rays, light illumination)</li>
<li>can be tied into particle</li>
<li>Volumetric Materials</li>
<li>Distance Fog</li>
</ul>
</li>
<li>Physically Based Sky Atmosphere
<ul>
<li>check for <a href=../kickstart_world>World Building chapter</a></li>
<li>Distance Fog</li>
</ul>
</li>
</ul>
</li>
<li>Translucency
<ul>
<li>Refraction
<ul>
<li>material detail panel -> Refraction Mode
<ul>
<li>Pixel Normal Offset : for flat surface</li>
<li>Index Of Refraction : for complex 3d objects</li>
</ul>
</li>
</ul>
</li>
<li>if you set Shading Mode as unlit, it&rsquo;s good for performance</li>
<li>Lighting Mode
<ul>
<li>Volumetric NonDirectional
<ul>
<li>cheapest</li>
</ul>
</li>
<li>Volumetric Directional</li>
<li>Translucency Volume</li>
<li>Volumetric PerVertex NonDirectional
<ul>
<li>almost cheapest</li>
</ul>
</li>
<li>Volumetric PerVertex Directional</li>
<li>Surface ForwardShading
<ul>
<li>heaviest, nice looking</li>
</ul>
</li>
<li>Raytraced</li>
</ul>
</li>
</ul>
</li>
</ul>
<h3 id=post-processing>Post Processing<a hidden class=anchor aria-hidden=true href=#post-processing>#</a></h3>
<blockquote>
<p>Unrea;&rsquo;s almost postprocessings are enabled by default <br>
Highlight with Volume, Camera, Component, Project Setting <br>
turning checkbox off doesn&rsquo;t mean feature is off <br>
set Cvar into 0 or modify project setting to turn feature off</p>
</blockquote>
<ul>
<li>Tonemapper
<ul>
<li><code>r.Tonemapper.Sharpen</code></li>
</ul>
</li>
<li>Bloom
<blockquote>
<p>multi-stage; layered resulting <br>
supports reflection, 6 of size scale and tint</p>
</blockquote>
<ul>
<li>Standard</li>
<li>Convolution
<ul>
<li>high quality, expensive, not for realtime rendering</li>
</ul>
</li>
</ul>
</li>
<li>SSAO (Screen Space Ambient Occlusion)</li>
<li>SSSSS (Screen Space SubSurface Scattering)
<blockquote>
<p>for skin, wax on candle. leaves</p>
</blockquote>
<ul>
<li>Burley SSSSS</li>
</ul>
</li>
<li>SSGI (Screen Space Global Illuminaion)
<ul>
<li>disabled by default</li>
<li>approximate GI in screen space (like photoshop)</li>
</ul>
</li>
<li>Depth Of Field
<ul>
<li>Gaussian
<ul>
<li>low quality, cheapest</li>
</ul>
</li>
<li>Bokeh
<ul>
<li>expensive, high quality</li>
<li>but Circle/Cinematic is better in performance</li>
<li>deprecated; will be removed</li>
</ul>
</li>
<li>Circle/Cinematic
<ul>
<li>high quality, acceptable performance</li>
</ul>
</li>
</ul>
</li>
<li>Exposure
<ul>
<li>uses setting in game setting</li>
</ul>
</li>
<li>Blendables
<ul>
<li>allows PP Material to modify how screen looks like</li>
<li>e.g. underwater</li>
</ul>
</li>
<li>Camera Effects
<ul>
<li>Grain</li>
<li>Vignette</li>
<li>Chromatic Abberation</li>
<li>Lensflares</li>
<li>Dirt Mask</li>
</ul>
</li>
</ul>
<h2 id=final-frame-frame-n-done>Final Frame (Frame N, done)<a hidden class=anchor aria-hidden=true href=#final-frame-frame-n-done>#</a></h2>
<h3 id=performance>Performance<a hidden class=anchor aria-hidden=true href=#performance>#</a></h3>
<blockquote>
<p>check for world building chepter since it&rsquo;s closely related</p>
</blockquote>
<ul>
<li>GPU Profiler</li>
<li>Stats</li>
<li>View Modes</li>
<li>Scalability
<ul>
<li><strong>CVars</strong>
<ul>
<li>CVars are not saved; reset when you turn editor o</li>
<li><code>r.*</code> : rendering, performance critial</li>
<li><code>help</code> : generate HTML page that lists command and description</li>
</ul>
</li>
<li>Scalability Example
<ul>
<li>Device Profile
<blockquote>
<p>CVars are automatically called in distinct device</p>
</blockquote>
<ul>
<li>can type in text inside <code>DefaultDeviceProfile.ini</code></li>
<li>can set layer by power to make engine estimate device power and adjust them</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<h1 id=advice>Advice<a hidden class=anchor aria-hidden=true href=#advice>#</a></h1>
<ul>
<li>Managing tris and draw calls
<ul>
<li>do not forget using statistic panel</li>
<li>Merge Actors
<ul>
<li>grouping by materials</li>
<li>into single mesh</li>
<li>into an actor with multiple instanced static mesh components</li>
</ul>
</li>
<li>Hitting the right balance (check rendering course)</li>
<li>LOD
<ul>
<li>Forced LOD Model</li>
<li>LOD Reduction</li>
<li>Detail Mode</li>
</ul>
</li>
</ul>
</li>
<li>Shadow rendering
<ul>
<li>Balance Cascaded Shadow Map / Distant Field</li>
<li>Far Shadows
<ul>
<li>set number of cascade cases and distance in directional light</li>
<li>set whether makes far shadow or not in model</li>
<li>kinda outdated by distance field</li>
</ul>
</li>
<li>Toggling/Light Range
<ul>
<li>Max draw distnace in Light detail panel</li>
</ul>
</li>
<li>Polycount/LODs</li>
<li>Large Meshes/Foliage Shadows</li>
<li>Toggling Shadows on detail meshes (DF+Regular)
<ul>
<li>Distance Field Shadow is useless for small meshes</li>
</ul>
</li>
</ul>
</li>
<li>Material cost
<ul>
<li>Noise is expensive</li>
<li>Instruction counts / Shader complexity</li>
<li>Balance between permutations/Instruction and Materials/Instances</li>
<li>Quality Switch</li>
</ul>
</li>
<li>Translucency
<ul>
<li>use Unlit if you can</li>
<li>Instruction counts important</li>
<li>if lit - use the volume mode + CVars
<ul>
<li>e.g. <code>r.TranslucencyLightingVolumeDim</code></li>
</ul>
</li>
<li>Forward + Reflection is very expensive</li>
<li>Dithered translucency</li>
</ul>
</li>
<li>Baking lighting
<ul>
<li>baking light needs all levels loaded</li>
<li>Lightmass Importance Volume</li>
<li>Volumetric Lightmaps tips
<ul>
<li>cell size in world property</li>
<li>Volumetric Lightmap Density Volume</li>
</ul>
</li>
<li>override Lightmap size</li>
<li>can mass manipulate LM + Statics</li>
<li>Build time = LM Res + # lighta + # Meshes + Source Radius + Radius</li>
</ul>
</li>
<li>Reflections
<ul>
<li>Base layer with Sphere Reflection Captures</li>
<li>Placement, tactic, cost and limits</li>
<li>Screen Space Reflection settings</li>
<li>Planar is rare, careful with real time</li>
</ul>
</li>
<li>Forward/Mobile
<ul>
<li>Other renderers and where to find them</li>
<li>Previewing</li>
<li>Material settngs</li>
</ul>
</li>
<li>Scalability Cvars/Shows
<ul>
<li>CVar tweaking and experimentation workflow</li>
<li>Help HTML Export</li>
<li>Setting defaults</li>
<li>Performance assessments with CVar toggling and Show/Hide commands</li>
</ul>
</li>
<li>use Light Fallout Exponent for sizing light with less cost</li>
<li>try to use RenderDoc</li>
</ul>
</div>
<footer class=post-footer>
<nav class=paginav>
<a class=prev href=https://niiok.github.io/unreal/network/>
<span class=title>« Prev Page</span>
<br>
<span>Unreal Network</span>
</a>
<a class=next href=https://niiok.github.io/unreal/sjoerddejong/kickstart_world/>
<span class=title>Next Page »</span>
<br>
<span>Unreal Kickstart - World Building</span>
</a>
</nav>
</footer>
</article>
</main>
<footer class=footer>
<span>&copy; 2022 <a href=https://niiok.github.io/>Niiok's Blog</a></span>
<span>
Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://git.io/hugopapermod rel=noopener target=_blank>PaperMod</a>
</span>
</footer>
<a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg>
</a>
<script>let menu=document.getElementById('menu');menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(a=>{a.addEventListener("click",function(b){b.preventDefault();var a=this.getAttribute("href").substr(1);window.matchMedia('(prefers-reduced-motion: reduce)').matches?document.querySelector(`[id='${decodeURIComponent(a)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(a)}']`).scrollIntoView({behavior:"smooth"}),a==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${a}`)})})</script>
<script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script>
<script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove('dark'),localStorage.setItem("pref-theme",'light')):(document.body.classList.add('dark'),localStorage.setItem("pref-theme",'dark'))})</script>
<script>document.querySelectorAll('pre > code').forEach(b=>{const c=b.parentNode.parentNode,a=document.createElement('button');a.classList.add('copy-code'),a.innerText='copy';function d(){a.innerText='copied!',setTimeout(()=>{a.innerText='copy'},2e3)}a.addEventListener('click',e=>{if('clipboard'in navigator){navigator.clipboard.writeText(b.textContent),d();return}const a=document.createRange();a.selectNodeContents(b);const c=window.getSelection();c.removeAllRanges(),c.addRange(a);try{document.execCommand('copy'),d()}catch(a){}c.removeRange(a)}),c.classList.contains("highlight")?c.appendChild(a):c.parentNode.firstChild==c||(b.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName=="TABLE"?b.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(a):b.parentNode.appendChild(a))})</script>
</body>
</html>